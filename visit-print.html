<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ø·Ø¨Ø§Ø¹Ø© Ø²ÙŠØ§Ø±Ø© ØµÙÙ‘ÙŠØ©</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:'Cairo',sans-serif}
body{margin:0;background:#fff}
.wrap{max-width:1000px;margin:0 auto;padding:20px}
.header{text-align:center;margin-bottom:14px}
.school{font-size:20px;font-weight:700}
.title{font-size:18px;margin-top:6px}
.meta{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:14px}
.box{border:1px solid #000;padding:8px;font-size:14px}
table{width:100%;border-collapse:collapse;margin-top:14px}
th,td{border:1px solid #000;padding:8px;text-align:center;font-size:13px}
th{background:#f0f0f0}
.left{text-align:right}
.section{margin-top:14px}
.footer{margin-top:20px;display:grid;grid-template-columns:1fr 1fr;gap:40px;text-align:center}
@media print{button{display:none}}
</style>
</head>

<body>
<div class="wrap">

  <div class="header">
    <div class="school">Ù…Ø¯Ø§Ø±Ø³ Ø§Ù„ÙÙ„Ø§Ø­ Ø§Ù„Ø£Ù‡Ù„ÙŠØ©</div>
    <div class="title">Ù†Ù…ÙˆØ°Ø¬ ØªØ¨Ø§Ø¯Ù„ Ø²ÙŠØ§Ø±Ø© ØµÙÙ‘ÙŠØ©</div>
  </div>

  <div class="meta">
    <div class="box"><b>Ø§Ù„ÙŠÙˆÙ…:</b> <span id="visitDay"></span></div>
    <div class="box"><b>Ø§Ù„ØªØ§Ø±ÙŠØ®:</b> <span id="visitDate"></span></div>
    <div class="box"><b>Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø²Ø§Ø¦Ø±:</b> <span id="visitorTeacher"></span></div>
    <div class="box"><b>Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ù…ÙØ²Ø§Ø±:</b> <span id="visitedTeacher"></span></div>
    <div class="box"><b>Ø§Ù„ÙØµÙ„:</b> <span id="classText"></span></div>
    <div class="box"><b>Ø§Ù„Ø­ØµØ©:</b> <span id="periodText"></span></div>
    <div class="box"><b>Ø§Ù„Ù…Ø§Ø¯Ø©:</b> <span id="subjectText"></span></div>
    <div class="box"><b>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ø±Ø³:</b> <span id="lessonTitle"></span></div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Ù…</th>
        <th class="left">Ø§Ù„Ù…Ø¬Ø§Ù„</th>
        <th>Ù…Ù…ØªØ§Ø²</th>
        <th>Ø¬ÙŠØ¯</th>
        <th>Ù…ØªÙˆØ³Ø·</th>
        <th>Ø¥Ù„Ù‰ Ø­Ø¯ Ù…Ø§</th>
        <th>Ù„Ù… ÙŠÙ†ÙØ°</th>
      </tr>
    </thead>
    <tbody id="evalBody"></tbody>
  </table>

  <div class="section">
    <b>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©:</b>
    <div class="box" id="positiveNotes"></div>
  </div>

  <div class="section">
    <b>Ø§Ù„ØªÙˆØµÙŠØ§Øª:</b>
    <div class="box" id="recommendations"></div>
  </div>

  <div class="footer">
    <div>
      ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø²Ø§Ø¦Ø±<br><br>â€¦â€¦â€¦â€¦â€¦â€¦â€¦
    </div>
    <div>
      ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ù…Ø´Ø±Ù<br><br>â€¦â€¦â€¦â€¦â€¦â€¦â€¦
    </div>
  </div>

  <br>
  <button onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

/* Firebase */
const app = initializeApp({
  apiKey: "AIzaSyBbUryd9blqEG60L15-L_wU8-NORoHq4r4",
  authDomain: "visit-2026.firebaseapp.com",
  projectId: "visit-2026"
});
const db = getFirestore(app);

/* get id */
const params = new URLSearchParams(window.location.search);
const visitId = params.get("id");
if(!visitId){ alert("Ø±Ù‚Ù… Ø§Ù„Ø²ÙŠØ§Ø±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"); }

/* questions */
const questions = [
  "ÙˆØ¶ÙˆØ­ Ø£Ù‡Ø¯Ø§Ù Ø§Ù„Ø¯Ø±Ø³","ØªØ³Ù„Ø³Ù„ Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø¯Ø±Ø³","ÙˆØ¶ÙˆØ­ Ù…Ø®Ø§Ø±Ø¬ Ø§Ù„ØµÙˆØª","Ù…Ù†Ø§Ø³Ø¨Ø© Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ³",
  "Ø¬ÙˆØ¯Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªÙŠ ØªÙÙ„Ù‚Ù‰ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø§Ø¨","Ù…Ù‡Ø§Ø±Ø© ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø§Ø¨",
  "ØªÙ‚Ø¨Ù„ Ø§Ù„Ù…Ø¹Ù„Ù… Ù„Ø¢Ø±Ø§Ø¡ ÙˆÙ…Ø´Ø§Ø±ÙƒØ§Øª Ø§Ù„Ø·Ù„Ø§Ø¨","Ø¬Ø°Ø¨ Ø§Ù†ØªØ¨Ø§Ù‡ Ø§Ù„Ø·Ù„Ø§Ø¨",
  "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„ØªØ´Ø¬ÙŠØ¹ ÙˆØ§Ù„ØªØ¹Ø²ÙŠØ² Ù„Ù„Ø·Ù„Ø§Ø¨","ØªÙ…ÙƒÙ† Ø§Ù„Ù…Ø¹Ù„Ù… Ù…Ù† Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¹Ù„Ù…ÙŠØ©",
  "Ø§Ø³ØªØ«Ù…Ø§Ø± ÙˆÙ‚Øª Ø§Ù„Ø­ØµØ©","Ø´Ø®ØµÙŠØ© Ø§Ù„Ù…Ø¹Ù„Ù…","Ù…Ø¸Ù‡Ø± Ø§Ù„Ù…Ø¹Ù„Ù…","Ø¶Ø¨Ø· Ø§Ù„Ø·Ù„Ø§Ø¨",
  "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø³Ø¨ÙˆØ±Ø© ÙˆØªÙ†Ø¸ÙŠÙ…Ù‡Ø§","Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ù„Ù„Ø¯Ø±Ø³",
  "ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø¯Ø±Ø³ ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø­ØµØ©","Ø±ØµØ¯ ÙˆØªØ³Ø¬ÙŠÙ„ Ù…Ø´Ø§Ø±ÙƒØ§Øª ÙˆØ¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨"
];

const body = document.getElementById("evalBody");

const snap = await getDoc(doc(db,"visits",visitId));
const v = snap.data();

/* fill meta */
visitDay.textContent = v.visitDay || "";
visitDate.textContent = v.visitDate || "";
visitorTeacher.textContent = v.visitorTeacherName || "";
visitedTeacher.textContent = v.visitedTeacherName || "";
classText.textContent = v.classText || "";
periodText.textContent = v.periodText || "";
subjectText.textContent = v.subjectText || "";
lessonTitle.textContent = v.lessonTitle || "";
positiveNotes.textContent = v.positiveNotes || "";
recommendations.textContent = v.recommendations || "";

/* table */
questions.forEach((q,i)=>{
  const tr=document.createElement("tr");
  tr.innerHTML=`
    <td>${i+1}</td>
    <td class="left">${q}</td>
    ${["Ù…Ù…ØªØ§Ø²","Ø¬ÙŠØ¯","Ù…ØªÙˆØ³Ø·","Ø¥Ù„Ù‰ Ø­Ø¯ Ù…Ø§","Ù„Ù… ÙŠÙ†ÙØ°"].map(vl=>`
      <td>${v.formAnswers?.["q"+(i+1)]===vl?"âœ”ï¸":""}</td>
    `).join("")}
  `;
  body.appendChild(tr);
});
</script>

</body>
</html>
